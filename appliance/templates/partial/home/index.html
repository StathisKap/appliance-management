{% extends "base.html" %}
{% load static %}
{% block content %}
  {% if user.first_name %}
    <h1>Hello {{ user.first_name }} {{ user.last_name }}</h1>
  {% else %}
    <h1>Hello {{ user.username }}</h1>
  {% endif %}
  <hr>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for property in user_properties %}
      <div class="col">
        <div class="card property-card h-100">
          <a href="{% url 'property_view' property.property.id %}">
            {% if property.property.image %}
              <img
                src="{{ property.property.image.url }}"
                class="card-img-top property-image"
                alt="{{ property.property.name }}"
                height="200px"
                width="100%">
            {% else %}
              <img
                src="{% static 'Blackhorse_Mills_Flat_101.jpg' %}"
                class="card-img-top property-image"
                alt="Property Image"
                height="200px"
                width="100%">
            {% endif %}
          </a>
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <h5 class="card-title">{{ property.property.name }}</h5>
              <p class="card-text">{{ property.property.address }}</p>
            </div>
            <div>
              <a href="{% url 'property_view' property.property.id %}" class="btn btn-primary">View Property</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

<style>
  .property-image {
    object-fit: cover;
  }
  .property-card {
    width: 100%;
  }
</style>
{% endblock content %}
